# linepix
> Create artistic images using only straight lines

<img src="https://img.shields.io/github/license/hbostann/linepix?color=blueviolet&label=License&logo=data%3Aimage%2Fpng%3Bbase64%2CiVBORw0KGgoAAAANSUhEUgAAAJQAAACpCAMAAAD6BuSVAAAABGdBTUEAALGPC%2FxhBQAAAAFzUkdCAK7OHOkAAAHjUExURQAAAL%2Bc4raO3b6a4byX4L6b4cGf47GG2sCe4raN3bOL2cOj476b4LeP3b6d4L2c38215a%2BE2cGi38Gg4rya36l907CG2K2C18qu5MGi4bqV3reQ3bSM27eU2rGF2r%2Be37SN2rSM2ruV37aP3LmX27WP2rSN2rqX3dK56b2a37GK2a%2BE2K2D1bmU3LGF2rGG2baS2rGH2a%2BG18uv5bKJ2baR2reP3bKK2bmV3LGJ2bqY3KqFz8Gg46Z9z7mW27%2Bc4b%2Be4biS3K%2BG17uZ3b6c4KuA1qmDz9vI7ap81dW%2F6rCH2NO%2B6byY4KuA1rmW3LeR3KV109G56Kh61NK76cGf4biT27mV3bmY2rKL2LGL17eT2sSj5Mqs5raQ28Cd48et4baN3bGO1LeS2q2D18Ge5K2I07uZ3LaR28%2B45rGK2cap4tS77KyI0MCe4Mip5sms5sao4q6J0rqW3baQ262D1bON2bOM2r6b4LGG2rCF2q6C2bGF2q%2BD2a6C2LCE2bCF2bKG266B2bGH2rCE2rCD2q6B2K%2BC2a1%2F2a2A2bKH2q%2BD2rKH3LGG26%2BE2K6E2Kh51qp716%2BC2rKI261%2F2LOK27OH3KyA16l61rKG2qx%2B2LGH2a6D16Z01Kd31LCG2LCF2LCF2wIMlL0AAAB4dFJOUwBIxV91VizxOszDI13CKgUZ8hMnWXbUrkAKY9HPVPWr7sWLix6sszdMMNHx8Ibx%2BU%2F88IPzmL%2B5aul8VDddPnZDneVKRsZxJPlI6Gtu2l6v%2BjXVGx62eBqHeK6KerRNdcpHzPw%2FnrSHDV9nKWe2WDJoXn%2Bj77u8SWOay%2BoAAAPySURBVHja7d3nV9NQGAbwiANoGbJlCQgiAjJFARFkuBDFgXvvvdcNty3NaLSQClgo1Ir6pyrtQSADP3CTvMfzPh%2FbD%2Fmd09ubm5ObJxxnnOymS1eK67OSbc32LNcpzixbL1c0%2B9RPwqyf2Bu%2F7K0dMSRtO%2F9DkVXiUIQWtwEpPyKMi8SxqAGX7ofbH1JU4mjUSNFq06svn6UgcTjKh5WkzOopJ3%2B4pUzUrZwFTgZUAiENy6bd5Z8IjCT%2FNZ05Hf0KDXWuPCoSYKjCs9EZAg1VECYEGurEdwoOdfTYNAGHKpj6Cg5VE5MIONRhIQgOdXySEnCo4QABh8qIUXioC2ECD%2BVS4KEuNlJ4qFIPgYfaIwBElU0CRJXIAFH1swBRdX6AqGSCKEQhClGIQhQAFPUwio8dinraPm5mkBu5%2BTIzlNLLMUrVXokVypPGCsWlByCivMxQG5mhkhBlPwrkmMplhtonsEKNtrEybWU3T9GxypSBDevPvf47ErtzH6%2F4mMQTZrpKoGyC6ylEIQpRVqFkL5MoEkOUp7p9E4MMdfaxO80oO1mdkDO%2BUVYoL8NF3uj%2FfTWDa3REAb5wYDbQR%2FewMj3qkFmh%2BOb2kYwt648744GP2YwuSmzuoYq%2BqMpylTDGJDyupxCFKEQhClGIQhSiEIUoRCEKUYhCFKIQhShEIQpRiEIUosAkmAUQpfYBRIXfwkPR2CF4qEgvBw41ns79A%2FVLHbU0%2Bu26%2FrtVa6KoIv3sSL2Val2SikXt%2FiChmFsLJYVKityZnKV5OqO9WT5XtgZKFQb7OcszQLV3uSfum6PmAyWF1pu4Z7oDCz2mKFGozbTBxB3R7VDwPDZFSY1uO0xc3rz2zyceNEUF3nD2oLSFJCo5YIaiddn2oK7NaY9Mus1Q0TJ7TNzVKc2ReXGXGWrypk2oSm2BhCRuMUFRf5NNqB3a3V2%2BYI4Jihe74aFIIM1hlFELwEKrXWPKpxtTuxc%2FN%2BpLkFw2oVonjf99Rs0SNNZlD6onqpunbi9%2BbtjBEdhpDypP21nmT8zohm0lNJJrD0q38CTxc59xr4v855LCkVWCN168aNyAI8qhUhtQr3U7GdWH8S%2BMu4JE2Xs9x3LUy3ntnDCdGM2mrUpCqKKzNKUrxbq4X3zTPu4w9zzxxIFp%2FxQvRXnKW5nwmO6ybzCxDB9e63k73trojucJ1cRRoDrNgr6F%2BJwOq%2F1NFPLj1yw1XlA9eZEhgI2C0y6A3YtLHbGwWiobAPd5wmw%2BXeyIhYcC2aa72DschocC2dAc77KehtBl3bJ60fUk9Fl2vvX7va4f3StA60eH2SQPtHM%2F8XYCF7S3Eyy%2Fx%2BGdQ%2B9x%2BA1auxTUFjeRXQAAAABJRU5ErkJggg%3D%3D" />


Linepix creates stylized drawings from images by using only straight lines that cross the whole image. Each line touches two different edges of the image. It can also create a video of the image generation process.

Linepix is written in Go. For image generation it doesn't have any dependencies. However, to generate video of the process [`ffmpeg`](https://ffmpeg.org/) must be installed.

<p align="center">
  <img src="https://github.com/hbostann/linepix/blob/main/demo.gif" alt="Demo Gif">
</p>


## Installation

```go get github.com/hbostann/linepix```

## Examples

### Simple
```bash
# Use default values
linepix -i input.jpg -o output.png
```

### Change size
```bash
# Make output's width 1024px, aspect ratio is preserved
linepix -i input.jpg -o output.png -w 1024

# Make output's height 600px, aspect ratio is preserved
linepix -i input.png -o output.png -h 600

# Don't resize output. Make it same size as input
linepix -i input.jpg -o output.png -w 0 -h 0
```

### Custom line count
```bash
# Draw 7000 lines on the output image.
linepix -i input.png -o output.png -w 1024 -l 7000

# Draw ~3x7000 lines on the output image (since it's color).
linepix -i input.jpg -o output.png -w 1024 -l 7000 --color
```

### Generate video
```bash
# Draw 10000 lines on the output image and generate a video
# with 2000 fps and freeze the last frame for 5 seconds.
# Resulting video length will be NumberOfLines/fps + freeze time
# 10000/2000 + 5 = 10 seconds of video will be generated.
linepix -i input.jpg -o output.png -l 10000 -v -f 2000 -s 5
```

_For more detail use the `--help` flag._

## How does it work?

Linepix, first finds the darkest pixel in the image. Then it generates lines that go through the darkes pixel with random slopes. It computes the average pixel value along each line and selects the line with the darkest value to be drawn. The value of the selected line is subtracted from the image. After the selected line is drawn on the output image whole process is repeated until the given number of lines are drawn. This process is performed on the grayscale version of the image if the output is not a color image. For color images the input is split into red, green, blue channels and each channel is treated as a grayscale image. Number of lines to draw on each channel is also adjusted by the intensities of each channel. Thus, nearly 3x more lines are drawn on color images.

## License

The MIT License (MIT) - see [`LICENSE.md`](https://github.com/hbostann/linepix/blob/main/LICENSE.md) for more details